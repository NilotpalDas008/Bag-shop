<%- include('./partials/header') %>
    <div class="w-full min-h-screen flex items-start px-20 py-20 gap-10">
        <div class="w-[60%] space-y-6">
            <% if (cartItems && cartItems.length) { %>
                <% cartItems.forEach(function(item){ %>
                    <div class="w-full rounded-md overflow-hidden border border-slate-200 bg-white">
                        <div class="w-full flex items-center justify-between px-5 py-4 gap-4">
                            <div class="flex items-center gap-4">
                                <div class="w-20 h-20 rounded-lg overflow-hidden bg-slate-100 flex items-center justify-center">
                                    <img class="w-full h-full object-contain" src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" alt="<%= item.name %>">
                                </div>
                                <div>
                                    <h3 class="text-2xl"><%= item.name %></h3>
                                    <p class="text-slate-500">MRP: ₹ <%= item.price %></p>
                                    <p class="text-slate-500">Discount: ₹ <%= item.discount || 0 %></p>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-lg font-semibold">₹ <%= (Number(item.price) || 0) - (Number(item.discount) || 0) %></div>
                                <a class="text-sm text-red-600 hover:text-red-700" href="/cart/remove/<%= item._id %>">Remove</a>
                            </div>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="w-full rounded-md border border-dashed border-slate-300 p-8 text-center text-slate-500">
                    Your cart is empty.
                </div>
            <% } %>
        </div>
        <div class="w-[40%]">
            <h3 class="text-xl">Price Breakdown</h3>
            <div class="px-6 mt-5">
                <div class="flex mt-2">
                    <h4 class="w-1/2">Total MRP</h4>
                    <h4>₹ <%= totalMrp %></h4>
                </div>
                <div class="flex mt-2">
                    <h4 class="w-1/2">Discount on MRP</h4>
                    <h4>₹ <%= totalDiscount %></h4>
                </div>
                <div class="flex mt-2">
                    <h4 class="w-1/2">Platform Fee</h4>
                    <h4>₹ 0</h4>
                </div>
                <div class="flex mt-2">
                    <h4 class="w-1/2">Shipping Fee</h4>
                    <h4>FREE</h4>
                </div>
            </div>
            <div class="w-full h-[1px] bg-black mt-10"></div>
            <div class="flex mt-5">
                <h3 class="w-1/2 text-xl">Total Amount</h3>
                <h3 class="font-semibold text-xl text-green-600">₹ <%= totalAmount %></h3>
            </div>
        </div>
    </div>
    <%- include('./partials/footer') %>